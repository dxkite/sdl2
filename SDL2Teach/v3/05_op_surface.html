<!DOCTYPE html>
<html>
<head>
<!--  
Copyright © dxkite all rights reserved.
SDL2 Teach Simple Web Page Code
SDL2教程简单网页代码
Copyright © 2014-2015 冯世昌 保留所有权利  
 -->
<meta content="text/html;charset=UTF-8" http-equiv="Content-Type">
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=yes" /> 
<script src="./component/js/common.js" type="text/javascript" ></script>
<link rel="stylesheet" type="text/css" href="./component/css/common.css"></link>

</head>
<body id="top" >
<title>SDL2教程-第五课 表面的调整</title>
<div id="loading">
加载中……
</div>
<div id="loaded">
<div id="title">第五课 表面的调整<a id="ctrl_menu" ><img class="menu_ico" src="./component/media/menu.png"/></a></div>
<div id="menu">
<ol class="menu_list">
<li><a href="http://tieba.baidu.com/f?kw=c4droid">C4droid吧</a></li>
<li><a href="./code/05_op_surface.zip" download>下载本课源码</a></a></li>
<li><a href="./contents.html">目录</a></li>

</ol>
</div>
<div id="page">
<center><span class="date">2015-7-24 18:07 最后编辑</span></center>
<p>本课，我们学习的是一些操作表面的方法：</p>
<div>方法一：设置表面绘图区</div>
<p>相关函数：SDL_SetClipRect，SDL_GetClipRect<br/>函数SDL_SetClipRect用于设置表面的绘图区域，指定了在某个区域内允许绘图，其他区域不动，该函数需配合函数SDL_BlitSurface使用：</p>
<pre>//填充窗口为白色
    SDL_FillRect(WindowScreen, NULL, SDL_MapRGB(WindowScreen->format, 0xff, 0xff, 0xff));
    SDL_Rect r =
    {
        100, 60, 200, 120
    };
	//设置允许绘图的区域
    if (SDL_SetClipRect(WindowScreen, &r) == SDL_TRUE)
    {
        //如果设置完成，则重画屏幕
        //粘贴表面
        SDL_BlitSurface(Surface, NULL, WindowScreen, NULL);
        //更新窗口
        SDL_UpdateWindowSurface(Window);
        SDL_Delay(2000);
    }</pre>
	<p>函数接受两个参数，第一个参数是将要设置的表面，第二个参数指定了允许绘图的区域，代码运行后效果如下</p>
<center><img  src="scr_shoot/05_1.gif" class="scr_shoot"></img><div class="t">运行效果动态图</div></center>
<div>方法二：设置表面透明色</div>
<p>相关函数：SDL_GetColorKey，SDL_SetColorKey;<br/>代码示例：</p>
<pre>    //如果设置成功
    if (SDL_SetColorKey(Surface,SDL_TRUE,SDL_MapRGB(Surface->format,0xff,0xff,0))==0)
    {
    SDL_FillRect(WindowScreen, NULL, SDL_MapRGB(WindowScreen->format, 0xcc, 0xcc, 0xcc));
    //设置成功后粘贴表面
    SDL_BlitSurface(Surface, NULL, WindowScreen, NULL);
    SDL_UpdateWindowSurface(Window);
    SDL_Delay(1000);
    }</pre>
<p>函数SDL_SetColorKey的参数，第一个为将要设置的表面，第二个为是否设置透明色（SDL_TRUE,SDL_FALSE），第三个为设置为透明的颜色，这里使用了SDL_MapRGB来确保颜色格式的正确:0xff,0xff,0x00为黄色</p>
<center><img  src="scr_shoot/05_2.gif" class="scr_shoot"></img><div class="t">运行效果动态图</div></center>
<div>方法三：保存表面为PNG或BMP格式</div>
<pre>
int SDL_SaveBMP(SDL_Surface* surface,
                const char*  file);
int IMG_SavePNG(SDL_Surface* surface,
                const char*  file);
</pre>
<div align="center"> <a href="#top" rel="goto Top" ><div id="gotop">回到顶部</div></a></div>
</div>
<div id="prev">
<a href="04_use_ttf.html" >&lt; 上一课</a></div>
<div id="next">
<a href="06_geometry_rendering.html" rel="next class">下一课 &gt;</a></div>
<div id="img_view"><div align="center"><img id="img_show"></img></div></div>
<div id="cpr"><a href="http://tieba.baidu.com/f?kw=dxkite">©2014-2015 DXkite all rights reserved.</a></div>


</div>
</body>
</html>